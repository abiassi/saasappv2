{"filter":false,"title":"users.js","tooltip":"/saasapp/app/assets/javascripts/users.js","undoManager":{"mark":1,"position":1,"stack":[[{"start":{"row":0,"column":0},"end":{"row":70,"column":3},"action":"remove","lines":["/* global $, Stripe */","//Document ready","$(document).on('turbolinks:load', function(){","  var theForm = $('#pro_form');","  var submitBtn = $('#form-signup-btn');","//Set Stripe public key","  Stripe.setPublisherKey( $('meta[name=\"stripe-key\"]').attr('content') );","","//When user clicks form submit btn","  submitBtn.click(function(event){","    event.preventDefault();","    submitBtn.val(\"Processing\").prop('disabled', true);","//prevent default submission behavior.","","//Collect credit card fields.","    var ccNum = $('#card_number').val(), ","        cvcNum = $('#card_code').val(),","        expMonth = $('#card_month').val(),","        expYear = $('#card_year').val();","        ","    // Use Stripe JS library to check for card errors.","    var error = false;","    ","    //Validate card number.","    if(!Stripe.card.validateCardNumber(ccNum)) {","      error = true;","      alert('The credit card number appears to be invalid')","    }","    ","    //Validate card number.","    if(!Stripe.card.validateCVC(cvcNum)) {","      error = true;","      alert('The CVC number appears to be invalid')","    }","    ","    //Validate expiration date.","    if(!Stripe.card.validateCardNumber(expMonth, expYear)) {","      error = true;","      alert('The expiration date appears to be invalid')","    }","    ","        ","    if (error) {","      //If there are card errors don't send to Stripe.","      submitBtn.prop('disabled', false).val(\"Sign Up\");","    } else {","     //Send the card info to Stripe.","      Stripe.createToken({","        number: ccNum,","        cvc: cvcNum,","        exp_month: expMonth,","        exp_year: expYear","      }, stripeResponseHandler);","    }","   ","  ","  return false;","  });","","//Stripe will return a card token.","  function stripeResponseHandler(status, response) {","    //Get the token from the response","    var token = response.id;","    ","    //Inject card token as hidden field into form.","    theForm.append( $('<input type=\"hidden\" name=\"user[stripe_card_token]\">').val(token) );","    ","  }","//Submit form to our Rails app.","  theForm.get(0).submit();","});"],"id":2},{"start":{"row":0,"column":0},"end":{"row":58,"column":0},"action":"insert","lines":["/* global $, Stripe */","//Document ready.","$(document).on('turbolinks:load', function(){","  var theForm = $('#pro_form');","  var submitBtn = $('#form-submit-btn');","  //Set Stripe public key.","  Stripe.setPublishableKey( $('meta[name=\"stripe-key\"]').attr('content') );","  //When user clicks form submit btn,","  submitBtn.click(function(event){","    //prevent default submission behavior.","    event.preventDefault();","    submitBtn.val(\"Processing\").prop('disabled', true);","    //Collect the credit card fields.","    var ccNum = $('#card_number').val(),","        cvcNum = $('#card_code').val(),","        expMonth = $('#card_month').val(),","        expYear = $('#card_year').val();","    //Use Stripe JS library to check for card errors.","    var error = false;","    //Validate card number.","    if(!Stripe.card.validateCardNumber(ccNum)) {","      error = true;","      alert('The credit card number appears to be invalid');","    }","    //Validate CVC number.","    if(!Stripe.card.validateCVC(cvcNum)) {","      error = true;","      alert('The CVC number appears to be invalid');","    }","    //Validate expiration date.","    if(!Stripe.card.validateExpiry(expMonth, expYear)) {","      error = true;","      alert('The expiration date appears to be invalid');","    }","    if (error) {","      //If there are card errors, don't send to Stripe.","      submitBtn.prop('disabled', false).val(\"Sign Up\");","    } else {","      //Send the card info to Stripe.","      Stripe.createToken({","        number: ccNum,","        cvc: cvcNum,","        exp_month: expMonth,","        exp_year: expYear","      }, stripeResponseHandler);","    }","    return false;","  });","  //Stripe will return a card token.","  function stripeResponseHandler(status, response) {","    //Get the token from the response.","    var token = response.id;","    //Inject the card token in a hidden field.","    theForm.append( $('<input type=\"hidden\" name=\"user[stripe_card_token]\">').val(token) );","    //Submit form to our Rails app.","    theForm.get(0).submit();","  }","});",""]}],[{"start":{"row":4,"column":27},"end":{"row":4,"column":33},"action":"remove","lines":["submit"],"id":3},{"start":{"row":4,"column":27},"end":{"row":4,"column":28},"action":"insert","lines":["s"]},{"start":{"row":4,"column":28},"end":{"row":4,"column":29},"action":"insert","lines":["i"]},{"start":{"row":4,"column":29},"end":{"row":4,"column":30},"action":"insert","lines":["g"]},{"start":{"row":4,"column":30},"end":{"row":4,"column":31},"action":"insert","lines":["n"]},{"start":{"row":4,"column":31},"end":{"row":4,"column":32},"action":"insert","lines":["u"]},{"start":{"row":4,"column":32},"end":{"row":4,"column":33},"action":"insert","lines":["p"]}],[{"start":{"row":10,"column":27},"end":{"row":10,"column":28},"action":"remove","lines":[" "],"id":5}],[{"start":{"row":10,"column":27},"end":{"row":10,"column":28},"action":"insert","lines":[" "],"id":4}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":15,"column":42},"end":{"row":15,"column":42},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1570257640792,"hash":"ff525748b1999bf8f7d52651171bf157ef816a5e"}